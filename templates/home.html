{% extends "base.html" %}
{% block title %}Budget{% endblock %}
{% block content %}
  <ul class="unstyled">
  {% for budget in budgets %}
    <li>
      <h2>{{ budget.title|e }} <small>{{ budget.description|e }}</small></h2>
      <dl class="dl-horizontal">
      {% for key, item in budget.items %}
        <dt>{{ item.amount|number_format(2)|e }}</dt>
        <dd>
          <form method="post" action="/budgets/{{budget._id}}/transactions/{{key}}">
            {{ item.description|e }}
            <input type="hidden" name="_METHOD" value="DELETE" />
            <button class="close">&times;</button>
          </form>
        </dd>
      {%endfor %}
      </dl>
      <form method="post" action="/budgets/{{budget._id}}/transactions">
        <dl class="dl-horizontal">
          <dt><input type="number" class="input-small" step="0.01" name="amount" placeholder="Amount" /></dt>
          <dd class="input-append">
            <input type="text" class="input-xx-large pull-left" name="description" placeholder="Description" />
            <button type="submit" class="btn">Save</button>
          </dd>
        </dl>
      </form>
      <dl class="dl-horizontal">
        <dt>{{ budget.total|number_format(2)|e }}</dt>
        <dd>
          <form method="post" action="/budgets/{{budget._id}}/transactions">
            <input type="hidden" name="snapshot" value="true" />
            <button class="close"><img src="/snapshot.png" /></button>
          </form>
        </dd>
      </dl>
    </li>
  {% endfor %}
  </ul>
{% endblock %}
